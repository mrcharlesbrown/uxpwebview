<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI WebView</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .log {
      white-space: pre-wrap;
      background: #fff;
      padding: 10px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h2>AI WebView Active</h2>
  <p><strong>Last received prompt:</strong></p>
  <div id="prompt" class="log">Waiting for prompt...</div>

  <script>
    window.addEventListener("message", async (event) => {
      const { type, prompt } = event.data;

      if (type === "ask-ai" && prompt) {
        document.getElementById("prompt").textContent = prompt;

        // Simulated AI response (replace this with actual API later)
        const simulatedResponse = `ðŸ¤– AI says: You said "${prompt}"`;

        // Send response back to host plugin
        parent.postMessage({
          type: "ai-response",
          response: simulatedResponse
        }, "*");
      }
    });

    // Optional: Notify host that webview is ready
    parent.postMessage({ type: "ready" }, "*");
  </script>
</body>
</html>
